{"mappings":"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","sources":["items.json","util/formatCurrency.js","util/addGlobalEventListener.js","shoppingCart.js","store.js"],"sourcesContent":["[\n  {\n    \"id\": 1,\n    \"name\": \"Casio MDV106 watch\",\n    \"category\": \"smart\",\n    \"priceCents\": 11600,\n    \"imageColor\": \"watch1.jpg\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"Swatch 1907 Bau watch\",\n    \"category\": \"classical\",\n    \"priceCents\": 2500,\n    \"imageColor\": \"watch2.jpg\"\n  },\n  {\n    \"id\": 3,\n    \"name\": \"Swatch Clearly Gent watch\",\n    \"category\": \"classical\",\n    \"priceCents\": 3400,\n    \"imageColor\": \"watch3.jpg\"\n  },\n  {\n    \"id\": 4,\n    \"name\": \"Tissot Carson watch\",\n    \"category\": \"Classical Watch\",\n    \"priceCents\": 1800,\n    \"imageColor\": \"watch4.jpg\"\n  },\n  {\n    \"id\": 5,\n    \"name\": \"Tissot Seastar 1000 watch\",\n    \"category\": \"Smart\",\n    \"priceCents\": 1600,\n    \"imageColor\": \"watch5.jpg\"\n  },\n  {\n    \"id\": 6,\n    \"name\": \"Timex Easy Reader watch\",\n    \"category\": \"Classical\",\n    \"priceCents\": 2100,\n    \"imageColor\": \"watch6.jpg\"\n  },\n  {\n    \"id\": 7,\n    \"name\": \"Timex Expedition Scout 36mm watch\",\n    \"category\": \"Classical\",\n    \"priceCents\": 6700,\n    \"imageColor\": \"watch7.jpg\"\n  },\n  {\n    \"id\": 8,\n    \"name\": \"Timex Q for Todd Snyder watch\",\n    \"category\": \"Classical\",\n    \"priceCents\": 11100,\n    \"imageColor\": \"watch8.jpg\"\n  }\n]\n","const formatter = new Intl.NumberFormat(undefined, {\n  style: \"currency\",\n  currency: \"USD\"\n})\n\nexport default function formatCurrency(amount) {\n  return formatter.format(amount)\n}","export default function addGlobalEventListener(type, selector, callback) {\n  document.addEventListener(type, e => {\n    if (e.target.matches(selector)) {\n      callback(e)\n    }\n  })\n}","import items from \"./items.json\";\nimport formatCurrency from \"./util/formatCurrency.js\";\nimport addGlobalEventListener from \"./util/addGlobalEventListener.js\";\n\nconst cartButton = document.querySelector(\"[data-cart-button]\");\nconst cartItemsWrapper = document.querySelector(\"[data-cart-items-wrapper]\");\nlet shoppingCart = [];\nconst IMAGE_URL = \"images/\";\nconst cartItemTemplate = document.querySelector(\"#cart-item-template\");\nconst cartItemContainer = document.querySelector(\"[data-cart-items]\");\nconst cartQuantity = document.querySelector(\"[data-cart-quantity]\");\nconst cartTotal = document.querySelector(\"[data-cart-total]\");\nconst cart = document.querySelector(\"[data-cart]\");\nconst SESSION_STORAGE_KEY = \"SHOPPING_CART-cart\";\n\nexport function setupShoppingCart() {\n  addGlobalEventListener(\"click\", \"[data-remove-from-cart-button]\", (e) => {\n    const id = parseInt(e.target.closest(\"[data-item]\").dataset.itemId);\n    removeFromCart(id);\n  });\n\n  shoppingCart = loadCart();\n  renderCart();\n\n  cartButton.addEventListener(\"click\", () => [\n    cartItemsWrapper.classList.toggle(\"invisible\"),\n  ]);\n}\n\nfunction saveCart() {\n  sessionStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(shoppingCart));\n}\n\nfunction loadCart() {\n  const cart = sessionStorage.getItem(SESSION_STORAGE_KEY);\n  return JSON.parse(cart) || [];\n}\n\nexport function addToCart(id) {\n  const existingItem = shoppingCart.find((entry) => entry.id === id);\n  if (existingItem) {\n    existingItem.quantity++;\n  } else {\n    shoppingCart.push({ id: id, quantity: 1 });\n  }\n  renderCart();\n  saveCart();\n}\n\nfunction removeFromCart(id) {\n  const existingItem = shoppingCart.find((entry) => entry.id === id);\n  if (existingItem == null) return;\n  shoppingCart = shoppingCart.filter((entry) => entry.id !== id);\n  renderCart();\n  saveCart();\n}\n\nfunction renderCart() {\n  if (shoppingCart.length === 0) {\n    hideCart();\n  } else {\n    showCart();\n    renderCartItems();\n  }\n}\n\nfunction hideCart() {\n  cart.classList.add(\"invisible\");\n  cartItemsWrapper.classList.add(\"invisible\");\n}\n\nfunction showCart() {\n  cart.classList.remove(\"invisible\");\n}\n\nfunction renderCartItems() {\n  cartQuantity.innerText = shoppingCart.length;\n\n  const totalCents = shoppingCart.reduce((sum, entry) => {\n    const item = items.find((i) => entry.id === i.id);\n    return sum + item.priceCents * entry.quantity;\n  }, 0);\n\n  cartTotal.innerText = formatCurrency(totalCents / 100);\n\n  const totalAmount = formatCurrency(totalCents / 100);\n  // console.log(totalAmount);\n  // set total to session storage\n  sessionStorage.setItem(\n    \"shoppingcart-totalAmount\",\n    JSON.stringify(totalAmount)\n  );\n\n  cartItemContainer.innerHTML = \"\";\n  shoppingCart.forEach((entry) => {\n    const item = items.find((i) => entry.id === i.id);\n    const cartItem = cartItemTemplate.content.cloneNode(true);\n\n    const container = cartItem.querySelector(\"[data-item]\");\n    container.dataset.itemId = item.id;\n\n    const name = cartItem.querySelector(\"[data-name]\");\n    name.innerText = item.name;\n\n    const image = cartItem.querySelector(\"[data-image]\");\n    image.src = `${IMAGE_URL}/${item.imageColor}/${item.imageColor}`;\n\n    if (entry.quantity > 1) {\n      const quantity = cartItem.querySelector(\"[data-quantity]\");\n      quantity.innerText = `x${entry.quantity}`;\n    }\n\n    const price = cartItem.querySelector(\"[data-price]\");\n    price.innerText = formatCurrency((item.priceCents * entry.quantity) / 100);\n\n    cartItemContainer.appendChild(cartItem);\n  });\n}\n","import items from \"./items.json\";\nimport formatCurrency from \"./util/formatCurrency.js\";\nimport addGlobalEventListener from \"./util/addGlobalEventListener.js\";\nimport { addToCart } from \"./shoppingCart.js\";\n\nconst storeItemTemplate = document.querySelector(\"#store-item-template\");\nconst storeItemContainer = document.querySelector(\"[data-store-container]\");\n// const IMAGE_URL = \"https://dummyimage.com/420x260\";\nconst IMAGE_URL = \"images\";\n\nexport function setupStore() {\n  if (storeItemContainer == null) return;\n\n  addGlobalEventListener(\"click\", \"[data-add-to-cart-button]\", (e) => {\n    const id = e.target.closest(\"[data-store-item]\").dataset.itemId;\n    addToCart(parseInt(id));\n  });\n\n  items.forEach(renderStoreItem);\n}\n\nfunction renderStoreItem(item) {\n  const storeItem = storeItemTemplate.content.cloneNode(true);\n\n  const container = storeItem.querySelector(\"[data-store-item]\");\n  container.dataset.itemId = item.id;\n\n  const name = storeItem.querySelector(\"[data-name]\");\n  name.innerText = item.name;\n\n  const category = storeItem.querySelector(\"[data-category]\");\n  category.innerText = item.category;\n\n  const image = storeItem.querySelector(\"[data-image]\");\n  image.src = `${IMAGE_URL}/${item.imageColor}`;\n\n  const price = storeItem.querySelector(\"[data-price]\");\n  price.innerText = formatCurrency(item.priceCents / 100);\n\n  storeItemContainer.appendChild(storeItem);\n}\n"],"names":["$83a1e690a1a534dd$exports","JSON","parse","$011d7be9f2477ddc$var$formatter","Intl","NumberFormat","undefined","style","currency","$011d7be9f2477ddc$export$2e2bcd8739ae039","amount","format","$4a36b5a236323303$export$2e2bcd8739ae039","type","selector","callback","document","addEventListener","e","target","matches","$7df2d36bda804ae5$var$cartButton","querySelector","$7df2d36bda804ae5$var$cartItemsWrapper","$7df2d36bda804ae5$var$shoppingCart","$7df2d36bda804ae5$var$cartItemTemplate","$7df2d36bda804ae5$var$cartItemContainer","$7df2d36bda804ae5$var$cartQuantity","$7df2d36bda804ae5$var$cartTotal","$7df2d36bda804ae5$var$cart","$7df2d36bda804ae5$var$saveCart","sessionStorage","setItem","stringify","$7df2d36bda804ae5$var$renderCart","length","classList","add","remove","innerText","totalCents","reduce","sum","entry","$parcel$interopDefault","find","i","id","priceCents","quantity","totalAmount","innerHTML","forEach","item","cartItem","content","cloneNode","dataset","itemId","name","src","imageColor","appendChild","$7df2d36bda804ae5$var$renderCartItems","$81c292505a4ac2c4$var$storeItemTemplate","$81c292505a4ac2c4$var$storeItemContainer","$81c292505a4ac2c4$var$renderStoreItem","storeItem","category","closest","existingItem","push","parseInt","filter","$7df2d36bda804ae5$var$removeFromCart","cart","getItem","$7df2d36bda804ae5$var$loadCart","toggle"],"version":3,"file":"index.77e1f27a.js.map"}